import{R as le,C as re,$ as A}from"./C8brLTrF.js";import{a1 as se,x as ne,a2 as oe,at as ie,C as x,a4 as W,N as y,d as s,w as r,f as u,g as de,P as a,n as p,e as b,ae as V,Q as B,O as N,A as F,t as Y,c as q,F as I,a6 as M,y as ue,q as ce,a9 as E,au as J,U as Q,aa as K,av as ge}from"./BhXYKl4D.js";import{_ as fe}from"./Du7QMOYj.js";import{_ as pe}from"./x-aT39Xi.js";import{u as X,r as Z}from"./flUbeGsD.js";import{q as ee}from"./DKyag-_S.js";import"./DL0A5yCj.js";const ye={slots:{root:"",header:"flex items-center justify-between",body:"flex flex-col space-y-4 pt-4 sm:flex-row sm:space-x-4 sm:space-y-0",heading:"text-center font-medium truncate mx-auto",grid:"w-full border-collapse select-none space-y-1 focus:outline-none",gridRow:"grid grid-cols-7 place-items-center",gridWeekDaysRow:"mb-1 grid w-full grid-cols-7",gridBody:"grid",headCell:"rounded-md",cell:"relative text-center",cellTrigger:["m-0.5 relative flex items-center justify-center rounded-full whitespace-nowrap focus-visible:ring-2 focus:outline-none data-disabled:text-muted data-unavailable:line-through data-unavailable:text-muted data-unavailable:pointer-events-none data-[selected]:text-inverted data-today:font-semibold data-[outside-view]:text-muted","transition"]},variants:{color:{primary:{headCell:"text-primary",cellTrigger:"focus-visible:ring-primary data-[selected]:bg-primary data-today:not-data-[selected]:text-primary data-[highlighted]:bg-primary/20 hover:not-data-[selected]:bg-primary/20"},secondary:{headCell:"text-secondary",cellTrigger:"focus-visible:ring-secondary data-[selected]:bg-secondary data-today:not-data-[selected]:text-secondary data-[highlighted]:bg-secondary/20 hover:not-data-[selected]:bg-secondary/20"},success:{headCell:"text-success",cellTrigger:"focus-visible:ring-success data-[selected]:bg-success data-today:not-data-[selected]:text-success data-[highlighted]:bg-success/20 hover:not-data-[selected]:bg-success/20"},info:{headCell:"text-info",cellTrigger:"focus-visible:ring-info data-[selected]:bg-info data-today:not-data-[selected]:text-info data-[highlighted]:bg-info/20 hover:not-data-[selected]:bg-info/20"},warning:{headCell:"text-warning",cellTrigger:"focus-visible:ring-warning data-[selected]:bg-warning data-today:not-data-[selected]:text-warning data-[highlighted]:bg-warning/20 hover:not-data-[selected]:bg-warning/20"},error:{headCell:"text-error",cellTrigger:"focus-visible:ring-error data-[selected]:bg-error data-today:not-data-[selected]:text-error data-[highlighted]:bg-error/20 hover:not-data-[selected]:bg-error/20"},neutral:{headCell:"text-highlighted",cellTrigger:"focus-visible:ring-inverted data-[selected]:bg-inverted data-today:not-data-[selected]:text-highlighted data-[highlighted]:bg-inverted/20 hover:not-data-[selected]:bg-inverted/10"}},size:{xs:{heading:"text-xs",cell:"text-xs",headCell:"text-[10px]",cellTrigger:"size-7",body:"space-y-2 pt-2"},sm:{heading:"text-xs",headCell:"text-xs",cell:"text-xs",cellTrigger:"size-7"},md:{heading:"text-sm",headCell:"text-xs",cell:"text-sm",cellTrigger:"size-8"},lg:{heading:"text-md",headCell:"text-md",cellTrigger:"size-9 text-md"},xl:{heading:"text-lg",headCell:"text-lg",cellTrigger:"size-10 text-lg"}}},defaultVariants:{size:"md",color:"primary"}},he={__name:"Calendar",props:{as:{type:null,required:!1},nextYearIcon:{type:String,required:!1},nextYear:{type:Object,required:!1},nextMonthIcon:{type:String,required:!1},nextMonth:{type:Object,required:!1},prevYearIcon:{type:String,required:!1},prevYear:{type:Object,required:!1},prevMonthIcon:{type:String,required:!1},prevMonth:{type:Object,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},range:{type:Boolean,required:!1},multiple:{type:Boolean,required:!1},monthControls:{type:Boolean,required:!1,default:!0},yearControls:{type:Boolean,required:!1,default:!0},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPlaceholder:{type:null,required:!1},placeholder:{type:null,required:!1},allowNonContiguousRanges:{type:Boolean,required:!1},pagedNavigation:{type:Boolean,required:!1},preventDeselect:{type:Boolean,required:!1},maximumDays:{type:Number,required:!1},weekStartsOn:{type:Number,required:!1},weekdayFormat:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1,default:!0},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},numberOfMonths:{type:Number,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},initialFocus:{type:Boolean,required:!1},isDateDisabled:{type:Function,required:!1},isDateUnavailable:{type:Function,required:!1},isDateHighlightable:{type:Function,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},disableDaysOutsideCurrentView:{type:Boolean,required:!1},fixedDate:{type:String,required:!1}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(R,{emit:g}){const e=R,C=g,{code:w,dir:i,t:l}=se(),c=ne(),$=oe(ie(e,"range","modelValue","defaultValue","color","size","monthControls","yearControls","class","ui"),C),T=x(()=>e.nextYearIcon||(i.value==="rtl"?c.ui.icons.chevronDoubleLeft:c.ui.icons.chevronDoubleRight)),n=x(()=>e.nextMonthIcon||(i.value==="rtl"?c.ui.icons.chevronLeft:c.ui.icons.chevronRight)),o=x(()=>e.prevYearIcon||(i.value==="rtl"?c.ui.icons.chevronDoubleRight:c.ui.icons.chevronDoubleLeft)),f=x(()=>e.prevMonthIcon||(i.value==="rtl"?c.ui.icons.chevronRight:c.ui.icons.chevronLeft)),d=x(()=>{var h;return W({extend:W(ye),...((h=c.ui)==null?void 0:h.calendar)||{}})({color:e.color,size:e.size})});function S(h,P){return P===-1?h.subtract({years:1}):h.add({years:1})}const t=x(()=>e.range?le:re);return(h,P)=>{var O;return s(),y(a(t).Root,B(a($),{"model-value":R.modelValue,"default-value":R.defaultValue,locale:a(w),dir:a(i),class:d.value.root({class:[(O=e.ui)==null?void 0:O.root,e.class]})}),{default:r(({weekDays:ae,grid:te})=>{var j,L;return[u(a(t).Header,{class:p(d.value.header({class:(j=e.ui)==null?void 0:j.header}))},{default:r(()=>{var m;return[e.yearControls?(s(),y(a(t).Prev,{key:0,"prev-page":v=>S(v,-1),"aria-label":a(l)("calendar.prevYear"),"as-child":""},{default:r(()=>[u(V,B({icon:o.value,size:e.size,color:"neutral",variant:"ghost"},e.prevYear),null,16,["icon","size"])]),_:1},8,["prev-page","aria-label"])):b("",!0),e.monthControls?(s(),y(a(t).Prev,{key:1,"aria-label":a(l)("calendar.prevMonth"),"as-child":""},{default:r(()=>[u(V,B({icon:f.value,size:e.size,color:"neutral",variant:"ghost"},e.prevMonth),null,16,["icon","size"])]),_:1},8,["aria-label"])):b("",!0),u(a(t).Heading,{class:p(d.value.heading({class:(m=e.ui)==null?void 0:m.heading}))},{default:r(({headingValue:v})=>[N(h.$slots,"heading",{value:v},()=>[F(Y(v),1)])]),_:3},8,["class"]),e.monthControls?(s(),y(a(t).Next,{key:2,"aria-label":a(l)("calendar.nextMonth"),"as-child":""},{default:r(()=>[u(V,B({icon:n.value,size:e.size,color:"neutral",variant:"ghost"},e.nextMonth),null,16,["icon","size"])]),_:1},8,["aria-label"])):b("",!0),e.yearControls?(s(),y(a(t).Next,{key:3,"next-page":v=>S(v,1),"aria-label":a(l)("calendar.nextYear"),"as-child":""},{default:r(()=>[u(V,B({icon:T.value,size:e.size,color:"neutral",variant:"ghost"},e.nextYear),null,16,["icon","size"])]),_:1},8,["next-page","aria-label"])):b("",!0)]}),_:3},8,["class"]),de("div",{class:p(d.value.body({class:(L=e.ui)==null?void 0:L.body}))},[(s(!0),q(I,null,M(te,m=>{var v;return s(),y(a(t).Grid,{key:m.value.toString(),class:p(d.value.grid({class:(v=e.ui)==null?void 0:v.grid}))},{default:r(()=>{var U;return[u(a(t).GridHead,null,{default:r(()=>{var k;return[u(a(t).GridRow,{class:p(d.value.gridWeekDaysRow({class:(k=e.ui)==null?void 0:k.gridWeekDaysRow}))},{default:r(()=>[(s(!0),q(I,null,M(ae,_=>{var z;return s(),y(a(t).HeadCell,{key:_,class:p(d.value.headCell({class:(z=e.ui)==null?void 0:z.headCell}))},{default:r(()=>[N(h.$slots,"week-day",{day:_},()=>[F(Y(_),1)])]),_:2},1032,["class"])}),128))]),_:2},1032,["class"])]}),_:2},1024),u(a(t).GridBody,{class:p(d.value.gridBody({class:(U=e.ui)==null?void 0:U.gridBody}))},{default:r(()=>[(s(!0),q(I,null,M(m.rows,(k,_)=>{var z;return s(),y(a(t).GridRow,{key:`weekDate-${_}`,class:p(d.value.gridRow({class:(z=e.ui)==null?void 0:z.gridRow}))},{default:r(()=>[(s(!0),q(I,null,M(k,D=>{var G;return s(),y(a(t).Cell,{key:D.toString(),date:D,class:p(d.value.cell({class:(G=e.ui)==null?void 0:G.cell}))},{default:r(()=>{var H;return[u(a(t).CellTrigger,{day:D,month:m.value,class:p(d.value.cellTrigger({class:(H=e.ui)==null?void 0:H.cellTrigger}))},{default:r(()=>[N(h.$slots,"day",{day:D},()=>[F(Y(D.day),1)])]),_:2},1032,["day","month","class"])]}),_:2},1032,["date","class"])}),128))]),_:2},1032,["class"])}),128))]),_:2},1032,["class"])]}),_:2},1032,["class"])}),128))],2)]}),_:3},16,["model-value","default-value","locale","dir","class"])}}},ve={key:0,class:"text-center font-bold"},ze=ue({__name:"index",async setup(R){let g,e;const C=ce(),w=new Date,i=E(new A(w.getFullYear(),w.getMonth()+1,w.getDate())),l=E();if(C.query.date&&typeof C.query.date=="string"){const n=C.query.date.split("-");l.value=new A(parseInt(n[0]),parseInt(n[1]),parseInt(n[2])),i.value=l.value}const{data:c}=([g,e]=J(()=>X("diary-list",()=>{const n=i.value.subtract({months:1}),o=i.value.add({months:1}),f=ee("diary");return f.order("date","DESC"),f.select("title","path","description","date"),f.where("date",">",[n.toString(),o.toString()]),f.all()})),g=await g,e(),g),$=n=>{var o;return!((o=c.value)!=null&&o.find(f=>f.date==n.toString()))},{data:T}=([g,e]=J(()=>X("diary-content",async()=>l.value?ee("diary").where("date","=",l.value.toString()).first():Promise.resolve(null))),g=await g,e(),g);return Q(l,async()=>{await ge({query:{date:l.value.toString()}}),Z("diary-content")}),Q(i,async(n,o)=>{(n.month!=o.month||n.year!=o.year)&&await Z("diary-list")}),(n,o)=>{const f=he,d=fe,S=pe;return s(),q("div",null,[u(f,{modelValue:a(l),"onUpdate:modelValue":o[0]||(o[0]=t=>K(l)?l.value=t:null),placeholder:a(i),"onUpdate:placeholder":o[1]||(o[1]=t=>K(i)?i.value=t:null),"is-date-disabled":$,class:"w-fit mx-auto mb-4 md:mb-6"},null,8,["modelValue","placeholder"]),u(S,null,{default:r(()=>[a(l)?(s(),q("h1",ve,Y(n.$d(a(l).toDate("JST"),"long")),1)):b("",!0),a(T)?(s(),y(d,{key:1,value:a(T),prose:!0,tag:"article",class:"diary-content"},null,8,["value"])):b("",!0)]),_:1})])}}});export{ze as default};
